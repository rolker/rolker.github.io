<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>udp_bridge: utest.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_13e138d54eb8818da29c3992edef070a.html">test</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">utest.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="utest_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="packet_8h.html">udp_bridge/packet.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="connection_8h.html">udp_bridge/connection.h</a>&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;gtest/gtest.h&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;ros/ros.h&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; </div>
<div class="line"><a name="l00006"></a><span class="lineno"><a class="line" href="utest_8cpp.html#af62076207d011ea238a997f27d789382">    6</a></span>&#160;<a class="code" href="utest_8cpp.html#af62076207d011ea238a997f27d789382">TEST</a>(UDPBridge_Packet, compressionTest)</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;{</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    std::string test_in {<span class="stringliteral">&quot;foobar foobar foobar foobar&quot;</span>};</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    std::vector&lt;uint8_t&gt; data_in(test_in.begin(),test_in.end());</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="keyword">auto</span> compressed_data = <a class="code" href="namespaceudp__bridge.html#a055de46a17e5c8e3526d0dc69b882fd1">udp_bridge::compress</a>(data_in);</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    <a class="code" href="structudp__bridge_1_1CompressedPacket.html">udp_bridge::CompressedPacket</a> *compressed_packet = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structudp__bridge_1_1CompressedPacket.html">udp_bridge::CompressedPacket</a>*<span class="keyword">&gt;</span>(compressed_data.data());</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    EXPECT_EQ(compressed_packet-&gt;<a class="code" href="structudp__bridge_1_1PacketHeader.html#a4d619634050ead79f601aa084d95a26a">type</a>, <a class="code" href="group__packet.html#ggab63281d979cbaf5d4220f8a6ef65aa8aa4d602abc0c0f2f7c1a5156d964517e4e">udp_bridge::PacketType::Compressed</a>);</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    EXPECT_LE(compressed_packet-&gt;<a class="code" href="structudp__bridge_1_1CompressedPacketHeader.html#a708b9a56b83c81173b330466ec6d141c">uncompressed_size</a>, test_in.size());</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    EXPECT_LT(compressed_data.size(), data_in.size());</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="keyword">auto</span> decompressed_data = <a class="code" href="namespaceudp__bridge.html#a8bdf9a52de60ae53346be1803239245f">udp_bridge::uncompress</a>(compressed_data);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    EXPECT_EQ(data_in.size(), decompressed_data.size());</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    EXPECT_EQ(data_in, decompressed_data);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    std::string decompressed_string(decompressed_data.begin(), decompressed_data.end());</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    EXPECT_EQ(test_in, decompressed_string);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;}</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="utest_8cpp.html#ad495cf033af716731d9c555a4a181fcb">   26</a></span>&#160;<a class="code" href="utest_8cpp.html#af62076207d011ea238a997f27d789382">TEST</a>(UDPBridge_Packet, addressToDottedTest)</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    sockaddr_in address {}; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    address.sin_addr.s_addr = htonl(0x7f000001);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    EXPECT_EQ(<a class="code" href="namespaceudp__bridge.html#a436e50a39e7b409c2d47f44d870b981a">udp_bridge::addressToDotted</a>(address),<span class="stringliteral">&quot;127.0.0.1&quot;</span>);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="utest_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">   35</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="utest_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv){</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  testing::InitGoogleTest(&amp;argc, argv);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">//ros::init(argc, argv, &quot;udp_bridge_tester&quot;);</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="comment">//ros::NodeHandle nh;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordflow">return</span> RUN_ALL_TESTS();</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespaceudp__bridge_html_a055de46a17e5c8e3526d0dc69b882fd1"><div class="ttname"><a href="namespaceudp__bridge.html#a055de46a17e5c8e3526d0dc69b882fd1">udp_bridge::compress</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; compress(const std::vector&lt; uint8_t &gt; &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="packet_8cpp_source.html#l00023">packet.cpp:23</a></div></div>
<div class="ttc" id="autest_8cpp_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="utest_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="utest_8cpp_source.html#l00035">utest.cpp:35</a></div></div>
<div class="ttc" id="agroup__packet_html_ggab63281d979cbaf5d4220f8a6ef65aa8aa4d602abc0c0f2f7c1a5156d964517e4e"><div class="ttname"><a href="group__packet.html#ggab63281d979cbaf5d4220f8a6ef65aa8aa4d602abc0c0f2f7c1a5156d964517e4e">udp_bridge::PacketType::Compressed</a></div><div class="ttdeci">@ Compressed</div><div class="ttdoc">packet of type CompressedPacket</div></div>
<div class="ttc" id="anamespaceudp__bridge_html_a436e50a39e7b409c2d47f44d870b981a"><div class="ttname"><a href="namespaceudp__bridge.html#a436e50a39e7b409c2d47f44d870b981a">udp_bridge::addressToDotted</a></div><div class="ttdeci">std::string addressToDotted(const sockaddr_in &amp;address)</div><div class="ttdef"><b>Definition:</b> <a href="connection_8cpp_source.html#l00171">connection.cpp:171</a></div></div>
<div class="ttc" id="autest_8cpp_html_af62076207d011ea238a997f27d789382"><div class="ttname"><a href="utest_8cpp.html#af62076207d011ea238a997f27d789382">TEST</a></div><div class="ttdeci">TEST(UDPBridge_Packet, compressionTest)</div><div class="ttdef"><b>Definition:</b> <a href="utest_8cpp_source.html#l00006">utest.cpp:6</a></div></div>
<div class="ttc" id="astructudp__bridge_1_1CompressedPacket_html"><div class="ttname"><a href="structudp__bridge_1_1CompressedPacket.html">udp_bridge::CompressedPacket</a></div><div class="ttdoc">Packet containing a compressed packet.</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00060">packet.h:60</a></div></div>
<div class="ttc" id="anamespaceudp__bridge_html_a8bdf9a52de60ae53346be1803239245f"><div class="ttname"><a href="namespaceudp__bridge.html#a8bdf9a52de60ae53346be1803239245f">udp_bridge::uncompress</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; uncompress(std::vector&lt; uint8_t &gt; const &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="packet_8cpp_source.html#l00040">packet.cpp:40</a></div></div>
<div class="ttc" id="aconnection_8h_html"><div class="ttname"><a href="connection_8h.html">connection.h</a></div></div>
<div class="ttc" id="apacket_8h_html"><div class="ttname"><a href="packet_8h.html">packet.h</a></div></div>
<div class="ttc" id="astructudp__bridge_1_1PacketHeader_html_a4d619634050ead79f601aa084d95a26a"><div class="ttname"><a href="structudp__bridge_1_1PacketHeader.html#a4d619634050ead79f601aa084d95a26a">udp_bridge::PacketHeader::type</a></div><div class="ttdeci">PacketType type</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00042">packet.h:42</a></div></div>
<div class="ttc" id="astructudp__bridge_1_1CompressedPacketHeader_html_a708b9a56b83c81173b330466ec6d141c"><div class="ttname"><a href="structudp__bridge_1_1CompressedPacketHeader.html#a708b9a56b83c81173b330466ec6d141c">udp_bridge::CompressedPacketHeader::uncompressed_size</a></div><div class="ttdeci">uint32_t uncompressed_size</div><div class="ttdoc">Size needed for the uncompressed version compressed_data.</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00055">packet.h:55</a></div></div>

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/udp_bridge">udp_bridge</a><br />
Author(s): </br />
<small>autogenerated on Fri Jul 21 2023 16:20:11</small>
</div>
</body>
</html>
